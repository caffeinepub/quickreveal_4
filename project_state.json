{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "NEXUS app — a beauty services marketplace with Pro and Client roles. Patch v6.0 consolidates critical fixes: replacing all emojis with inline SVGs, implementing 2x2 photo upload grid, complete subscription flow with animations, simplified dark palette (#0D0D13 base, #F2D06B gold CTA), Explorer cards as full-width list, Wallet with escrow explanation, role selection cards without emojis, and guaranteed button contrast.",
  "architectural_notes": [
    "Design system: #0D0D13 base background, #F2D06B gold for CTA only, #F4F4F8 primary text, #54546C secondary text, #00D97A success green",
    "Zero emoji policy: all icons must be inline SVG, stroke 1.5px, currentColor",
    "Button contrast rule: gold CTA (#F2D06B bg) must always use #050507 text — never gold on gold"
  ],
  "known_issues": [
    "Subscription button was rendering gold text on gold background — fixed in C8"
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-replace-every-emoji-in-the-ui-with-inline-svg-icons-stroke-1-5px-currentcolor-16px-default-pro-tab-bar-radar-circle-2-concentric-arcs-wallet-rectangle-with-centered-dashboard-3-horizontal-lines-mon-business-simple-pencil-client-tab-bar-explorer-thin-magnifier-r-servations-simple-calendar-alertes-thin-bell-profil-circle-clean-silhouette-section-titles-flash-live-plain-text-14px-lightning-svg-before-radar-buttons-accepter-14px-check-svg-d-cliner-14px-svg-subscription-modal-list-svg-thin-dash-bullet-no-emoji-mon-business-section-title-plain-text-only-me-rendre-visible-button-label-activer-mon-profil-confetti-particles-color-f2d06b-only",
      "title": "Replace every emoji in the UI with inline SVG icons (stroke 1.5px, currentColor, 16px default). Pro tab bar: Radar = circle + 2 concentric arcs, Wallet = rectangle with centered $, Dashboard = 3 horizontal lines, Mon Business = simple pencil. Client tab bar: Explorer = thin magnifier, Réservations = simple calendar, Alertes = thin bell, Profil = circle + clean silhouette. Section titles: 'Flash Live' = plain text + 14px lightning SVG before. Radar buttons: 'Accepter' + 14px check SVG, 'Décliner' + 14px × SVG. Subscription modal list: SVG thin dash bullet, no emoji. 'Mon Business' section title = plain text only. 'Me Rendre Visible' button label → 'Activer mon profil'. Confetti particles: color #F2D06B only.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-2-2-photo-upload-grid-in-the-monbusiness-gallery-section-each-empty-slot-contains-a-hidden-input-type-file-accept-image-tapping-the-slot-triggers-click-on-the-input-onchange-uses-filereader-readasdataurl-and-stores-the-dataurl-in-state-per-slot-index-filled-slots-show-img-src-dataurl-style-object-fit-cover-width-100-height-100-with-an-absolute-button-top-8px-right-8px-that-clears-that-slot-display-a-live-counter-x-4-photos-and-a-gold-progress-bar-at-count-4-100-width-when-count-3-show-the-text-minimum-atteint",
      "title": "Implement a 2×2 photo upload grid in the MonBusiness gallery section. Each empty slot contains a hidden <input type='file' accept='image/*'>; tapping the slot triggers .click() on the input. onChange uses FileReader.readAsDataURL and stores the dataURL in state per slot index. Filled slots show <img src={dataURL} style='object-fit:cover; width:100%; height:100%'> with an absolute × button (top: 8px, right: 8px) that clears that slot. Display a live counter 'X/4 photos' and a gold progress bar at (count/4)*100% width. When count >= 3, show the text 'Minimum atteint ✓'.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-complete-subscription-activation-flow-in-prosubscriptionmodal-activer-mon-profil-tap-opens-a-fullscreen-modal-with-title-7-jours-gratuits-inter-800-32px-white-subtitle-puis-19-90-chf-mois-inter-400-16px-9898b4-a-6-item-advantage-list-using-svg-thin-dash-bullets-no-emoji-email-input-bg-0d0d13-border-1e1e26-focus-border-f2d06b-and-a-commencer-l-essai-gratuit-button-bg-f2d06b-color-050507-inter-700-14px-height-56px-on-button-tap-1-a-gold-progress-bar-at-the-top-of-the-screen-animates-from-0-100-over-2s-2-a-fullscreen-overlay-050507-appears-showing-an-80px-circle-00d97e-with-an-animated-svg-check-stroke-dashoffset-400ms-text-profil-activ-inter-800-28px-f4f4f8-subtext-visible-par-les-clients-d-s-maintenant-inter-400-15px-9898b4-and-40-gold-confetti-particles-f2d06b-only-3-after-2500ms-navigate-to-pro-dashboard-and-set-state-proactif-true-essaijours-7-pro-dashboard-after-activation-shows-a-pill-badge-essai-gratuit-j1-7-00d97a-at-10-opacity-bg-border-text-color-flash-toggle-defaults-to-on-when-proactif-is-true-voir-mon-profil-public-button-navigates-to-explorer-with-the-pro-profile-visible-at-position-1",
      "title": "Implement the complete subscription activation flow in ProSubscriptionModal. 'Activer mon profil' tap opens a fullscreen modal with: title '7 jours gratuits' (Inter 800 32px white), subtitle 'puis 19.90 CHF/mois' (Inter 400 16px #9898B4), a 6-item advantage list using SVG thin-dash bullets (no emoji), email input (bg #0D0D13, border #1E1E26, focus border #F2D06B), and a 'Commencer l'essai gratuit' button (bg #F2D06B, color #050507, Inter 700 14px, height 56px). On button tap: (1) a gold progress bar at the top of the screen animates from 0→100% over 2s; (2) a fullscreen overlay (#050507) appears showing an 80px circle (#00D97E) with an animated SVG check (stroke-dashoffset 400ms), text 'Profil activé' (Inter 800 28px #F4F4F8), subtext 'Visible par les clients dès maintenant' (Inter 400 15px #9898B4), and 40 gold confetti particles (#F2D06B only); (3) after 2500ms, navigate to Pro Dashboard and set state { proActif: true, essaiJours: 7 }. Pro Dashboard after activation shows a pill badge 'ESSAI GRATUIT · J1/7' (#00D97A at 10% opacity bg + border + text color). Flash toggle defaults to ON when proActif is true. 'Voir mon profil public' button navigates to Explorer with the pro profile visible at position 1.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-simplify-the-color-palette-across-the-app-explorer-cards-background-0d0d13-remove-all-violet-bordeaux-tints-border-1px-solid-rgba-255-255-255-0-06-wallet-card-background-linear-gradient-135deg-0a0a0a-0f0e0a-border-1px-solid-rgba-242-208-107-0-15-remove-orange-brown-saturated-gradient-balance-display-240-chf-in-inter-900-48px-f2d06b-solde-disponible-in-inter-600-10px-54546c-bar-chart-inactive-bars-1c1c26-today-s-active-bar-f2d06b-remove-all-gold-brown-gradients-on-bars-tab-bar-both-client-and-pro-background-rgba-5-5-7-0-96-backdrop-blur-24px-border-top-1px-solid-rgba-255-255-255-0-04-active-tab-icon-svg-f2d06b-with-a-2px-f2d06b-top-indicator-20px-wide-inactive-tab-icon-svg-2e2e3e-no-colored-background-on-active-tab",
      "title": "Simplify the color palette across the app. Explorer cards: background #0D0D13 (remove all violet/bordeaux tints), border 1px solid rgba(255,255,255,0.06). Wallet card: background linear-gradient(135deg, #0A0A0A, #0F0E0A), border 1px solid rgba(242,208,107,0.15), remove orange-brown saturated gradient. Balance display: '240 CHF' in Inter 900 48px #F2D06B, 'SOLDE DISPONIBLE' in Inter 600 10px #54546C. Bar chart: inactive bars #1C1C26, today's active bar #F2D06B, remove all gold/brown gradients on bars. Tab bar (both client and pro): background rgba(5,5,7,0.96) backdrop-blur(24px), border-top 1px solid rgba(255,255,255,0.04), active tab icon SVG #F2D06B with a 2px #F2D06B top indicator 20px wide, inactive tab icon SVG #2E2E3E, no colored background on active tab.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-redesign-explorer-professional-cards-as-a-full-width-vertical-list-each-card-height-80px-background-0d0d13-border-1px-solid-rgba-255-255-255-0-05-border-radius-14px-padding-0-16px-display-flex-align-items-center-gap-14px-left-44px-circle-if-photo-img-object-fit-cover-border-radius-50-if-no-photo-subtle-gradient-inter-700-16px-initials-center-flex-1-name-in-inter-700-16px-f4f4f8-cat-gorie-ville-in-inter-400-13px-54546c-if-flash-active-r-pond-en-xmin-in-inter-500-12px-00d97a-text-only-no-emoji-right-text-right-svg-star-12px-4-9-in-inter-600-13px-d-s-35-chf-in-inter-700-14px-f2d06b",
      "title": "Redesign Explorer professional cards as a full-width vertical list. Each card: height 80px, background #0D0D13, border 1px solid rgba(255,255,255,0.05), border-radius 14px, padding 0 16px, display flex, align-items center, gap 14px. Left: 44px circle — if photo: img object-fit cover border-radius 50%; if no photo: subtle gradient + Inter 700 16px initials. Center (flex-1): name in Inter 700 16px #F4F4F8; 'Catégorie · Ville' in Inter 400 13px #54546C; if flash active: 'Répond en Xmin' in Inter 500 12px #00D97A (text only, no emoji). Right (text-right): SVG star 12px + '4.9' in Inter 600 13px; 'dès 35 CHF' in Inter 700 14px #F2D06B.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-walletpro-component-below-the-55-chf-s-questre-line-add-the-text-lib-r-dans-48h-apr-s-prestation-in-inter-400-12px-54546c-after-the-user-initiates-a-transfer-disable-the-transfer-button-and-display-its-label-as-virement-initi-for-30-seconds-show-a-toast-notification-for-5s-reading-virement-de-240-chf-vers-votre-revolut-with-a-3px-left-border-in-00d97a",
      "title": "Update the WalletPro component: below the '55 CHF séquestre' line, add the text 'Libéré dans 48h après prestation' in Inter 400 12px #54546C. After the user initiates a transfer, disable the transfer button and display its label as 'Virement initié' for 30 seconds. Show a toast notification for 5s reading 'Virement de 240 CHF vers votre Revolut' with a 3px left border in #00D97A.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-redesign-the-roleselection-screen-replace-current-cards-with-2-full-width-cards-each-96px-tall-zero-emojis-zero-ios-style-icons-client-card-title-client-inter-700-20px-f4f4f8-subtitle-r-servez-un-expert-domicile-inter-400-14px-54546c-svg-arrow-right-16px-2e2e3e-positioned-absolute-right-background-0d0d13-border-1e1e26-border-radius-16px-on-tap-border-changes-to-5b7fff-background-rgba-91-127-255-0-04-professional-card-title-professionnel-inter-700-20px-f4f4f8-subtitle-g-rez-votre-activit-beaut-inter-400-14px-54546c-svg-arrow-right-16px-2e2e3e-background-0d0d13-border-1e1e26-border-radius-16px-on-tap-border-changes-to-f2d06b-background-rgba-242-208-107-0-04",
      "title": "Redesign the RoleSelection screen. Replace current cards with 2 full-width cards, each 96px tall, zero emojis, zero iOS-style icons. Client card: title 'Client' Inter 700 20px #F4F4F8, subtitle 'Réservez un expert à domicile' Inter 400 14px #54546C, SVG arrow right 16px #2E2E3E positioned absolute right, background #0D0D13, border #1E1E26, border-radius 16px; on tap: border changes to #5B7FFF, background rgba(91,127,255,0.04). Professional card: title 'Professionnel' Inter 700 20px #F4F4F8, subtitle 'Gérez votre activité beauté' Inter 400 14px #54546C, SVG arrow right 16px #2E2E3E, background #0D0D13, border #1E1E26, border-radius 16px; on tap: border changes to #F2D06B, background rgba(242,208,107,0.04).",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-subscription-cta-button-commencer-l-essai-gratuit-and-any-similar-primary-cta-always-renders-with-background-f2d06b-and-text-color-050507-never-apply-gold-yellow-text-on-a-gold-yellow-background-anywhere-in-the-app-audit-all-buttons-with-f2d06b-background-and-enforce-dark-text-050507",
      "title": "Ensure the subscription CTA button 'Commencer l'essai gratuit' (and any similar primary CTA) always renders with background #F2D06B and text color #050507. Never apply gold/yellow text on a gold/yellow background anywhere in the app. Audit all buttons with #F2D06B background and enforce dark text #050507.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "C1 — Replace all emojis with inline SVG icons (stroke 1.5px, currentColor) across both tab bars, Radar buttons, subscription modal, and section titles",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "C2 — 2x2 photo upload grid with FileReader preview, cover display, delete button, X/4 counter and gold progress bar",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "C3 — Full subscription flow: fullscreen modal → progress bar → success overlay with animated check + gold confetti → Pro Dashboard with 'ESSAI GRATUIT · J1/7' badge",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "C4 — Simplified palette: Explorer cards on #0D0D13 (remove violet/bordeaux), neutral Wallet gradient, simplified chart bars, tab bar with 2px gold indicator no colored background",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "C5 — Explorer cards as full-width list (height 80px, flex, 44px circle avatar, SVG star rating)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "C6 — Wallet: escrow explanation text + 30s disabled button state post-transfer + green toast notification",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "C7 — Role selection: 2 full-width cards 96px, zero emojis, SVG arrow, blue/gold highlight on tap",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "C8 — Fix subscription button contrast: background #F2D06B / color #050507 (never gold on gold)",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "NEXUS",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}