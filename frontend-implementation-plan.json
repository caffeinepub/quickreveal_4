{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "NEXUS Patch v6.0 — Full UI Corrections (C1–C8)",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Replace all emoji characters with inline SVG icons (stroke 1.5px, currentColor) across the entire UI including tab bars, buttons, section titles, and confetti",
      "acceptanceCriteria": [
        "Zero emoji characters appear anywhere in the rendered UI",
        "All SVG icons use stroke 1.5px and inherit currentColor",
        "Both tab bars (pro and client) display SVG-only icons",
        "Radar Accept/Decline buttons show SVG check and × alongside text",
        "Confetti renders only in #F2D06B"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/BottomNav.tsx",
          "operation": "modify",
          "description": "Replace emoji icons in pro tab bar (Radar, Wallet, Dashboard, Mon Business) and client tab bar (Explorer, Réservations, Alertes, Profil) with inline SVG icons. Pro: Radar = circle + 2 concentric arcs, Wallet = rectangle with centered $, Dashboard = 3 horizontal lines, Mon Business = simple pencil. Client: Explorer = thin magnifier, Réservations = simple calendar, Alertes = thin bell, Profil = circle + clean silhouette. All SVGs use stroke='1.5px' and fill='currentColor'."
        },
        {
          "path": "frontend/src/components/ProDashboard.tsx",
          "operation": "modify",
          "description": "Replace 'Flash Live' section title emoji with a 14px lightning SVG icon positioned before the plain text. Ensure the SVG uses stroke='1.5px' and currentColor."
        },
        {
          "path": "frontend/src/components/RadarPro.tsx",
          "operation": "modify",
          "description": "Replace emojis in 'Accepter' and 'Décliner' buttons with inline SVG icons. 'Accepter' receives a 14px check SVG, 'Décliner' receives a 14px × SVG. Both use stroke='1.5px' and currentColor."
        },
        {
          "path": "frontend/src/components/ProSubscriptionModal.tsx",
          "operation": "modify",
          "description": "Replace emoji bullets in the subscription advantage list with thin-dash SVG bullets. Each bullet is an inline SVG line with stroke='1.5px' and currentColor. Remove any emoji characters from list items."
        },
        {
          "path": "frontend/src/components/MonBusiness.tsx",
          "operation": "modify",
          "description": "Replace section title 'Mon Business' emoji with plain text only. Update button label from 'Me Rendre Visible' to 'Activer mon profil'. Remove any emoji decorations."
        },
        {
          "path": "frontend/src/utils/confetti.ts",
          "operation": "modify",
          "description": "Update confetti particle rendering to use only color #F2D06B. Remove any multi-color logic and ensure all particles are rendered in the gold color (#F2D06B)."
        },
        {
          "path": "frontend/src/components/NexusOS.tsx",
          "operation": "modify",
          "description": "Remove any emoji characters from the NexusOS pro dashboard screen. Replace with inline SVG icons where visual indicators are needed, using stroke='1.5px' and currentColor."
        },
        {
          "path": "frontend/src/components/ClientDashboard.tsx",
          "operation": "modify",
          "description": "Remove any emoji characters from the client dashboard screen. Replace with inline SVG icons where visual indicators are needed, using stroke='1.5px' and currentColor."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Implement a 2×2 photo upload grid in the MonBusiness gallery with hidden file inputs, dataURL state, × remove buttons, live counter, and gold progress bar",
      "acceptanceCriteria": [
        "Grid renders as 2×2 layout with 4 slots",
        "Tapping an empty slot opens the native file picker",
        "Selected image displays as full cover within its slot",
        "× button removes the photo and resets that slot",
        "Counter 'X/4 photos' updates in real time",
        "Progress bar width equals (filledCount/4)*100% in gold",
        "Text 'Minimum atteint ✓' appears when 3 or more slots are filled"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/MonBusiness.tsx",
          "operation": "modify",
          "description": "Implement a 2×2 photo upload grid in the gallery section. Each of 4 slots contains a hidden <input type='file' accept='image/*'>. Tapping an empty slot triggers .click() on the input. onChange handler uses FileReader.readAsDataURL and stores the dataURL in state per slot index (0-3). Filled slots display <img src={dataURL} style='object-fit:cover; width:100%; height:100%'> with an absolute × button (top: 8px, right: 8px) that clears that slot. Show a live counter 'X/4 photos' and a gold (#F2D06B) progress bar at (count/4)*100% width. When count >= 3, display text 'Minimum atteint ✓'."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Implement complete Pro subscription activation flow with fullscreen modal, email input, progress bar, success overlay with animated check and confetti, and navigation to Pro Dashboard with trial badge",
      "acceptanceCriteria": [
        "Fullscreen modal opens with correct typography and colors on 'Activer mon profil' tap",
        "Email input has correct styling with gold focus border",
        "Button has #F2D06B background and #050507 text — never gold on gold",
        "Top progress bar animates 0→100% over 2s on submit",
        "Success overlay appears with animated green check circle and gold confetti",
        "Navigation to Pro Dashboard occurs after 2500ms",
        "proActif and essaiJours state are set correctly",
        "Pro Dashboard shows 'ESSAI GRATUIT · J1/7' badge in green pill style",
        "Flash toggle is ON by default when proActif is true"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/ProSubscriptionModal.tsx",
          "operation": "modify",
          "description": "Implement the complete activation flow. Fullscreen modal with: title '7 jours gratuits' (Inter 800 32px white), subtitle 'puis 19.90 CHF/mois' (Inter 400 16px #9898B4), 6-item advantage list using SVG thin-dash bullets (no emoji), email input (bg #0D0D13, border #1E1E26, focus border #F2D06B), and button 'Commencer l'essai gratuit' (bg #F2D06B, color #050507, Inter 700 14px, height 56px). On button tap: (1) animate gold progress bar at top from 0→100% over 2s; (2) show fullscreen overlay (#050507) with 80px green circle (#00D97E), animated SVG check (stroke-dashoffset 400ms), text 'Profil activé' (Inter 800 28px #F4F4F8), subtext 'Visible par les clients dès maintenant' (Inter 400 15px #9898B4), and 40 gold confetti particles (#F2D06B); (3) after 2500ms, navigate to Pro Dashboard and set state { proActif: true, essaiJours: 7 }."
        },
        {
          "path": "frontend/src/components/ProDashboard.tsx",
          "operation": "modify",
          "description": "Display pill badge 'ESSAI GRATUIT · J1/7' when proActif is true. Badge styling: background rgba(0,217,122,0.1), border 1px solid #00D97A, text color #00D97A. Set Flash toggle to ON by default when proActif is true. Add 'Voir mon profil public' button that navigates to Explorer with the pro profile visible at position 1."
        },
        {
          "path": "frontend/src/context/AppContext.tsx",
          "operation": "modify",
          "description": "Add state properties proActif (boolean) and essaiJours (number) to AppContext. Provide actions to set these values from ProSubscriptionModal. Ensure state persists across navigation and is accessible to ProDashboard and other components that need subscription status."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Simplify color palette: remove violet/bordeaux/gold gradients, apply neutral dark backgrounds to Explorer cards and Wallet, update bar chart colors, and redesign tab bar with gold active indicator",
      "acceptanceCriteria": [
        "No violet or bordeaux colors appear on Explorer cards",
        "Wallet card uses the specified neutral dark gradient",
        "Bar chart inactive bars are #1C1C26 and today's bar is #F2D06B with no gradients",
        "Tab bar background is rgba(5,5,7,0.96) with backdrop-blur",
        "Active tab shows a 2px gold top indicator and gold SVG icon, no colored background"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/Explorer.tsx",
          "operation": "modify",
          "description": "Update Explorer professional cards to use background #0D0D13 with border 1px solid rgba(255,255,255,0.06). Remove all violet and bordeaux tints from card backgrounds. Ensure cards render with a clean, neutral dark appearance."
        },
        {
          "path": "frontend/src/components/WalletPro.tsx",
          "operation": "modify",
          "description": "Update Wallet card background to linear-gradient(135deg, #0A0A0A, #0F0E0A) with border 1px solid rgba(242,208,107,0.15). Remove orange-brown saturated gradient. Balance display: '240 CHF' in Inter 900 48px #F2D06B, 'SOLDE DISPONIBLE' in Inter 600 10px #54546C. Bar chart: inactive bars #1C1C26, today's active bar #F2D06B, remove all gold/brown gradients on bars."
        },
        {
          "path": "frontend/src/components/BottomNav.tsx",
          "operation": "modify",
          "description": "Update tab bar (both client and pro) with background rgba(5,5,7,0.96) and backdrop-blur(24px), border-top 1px solid rgba(255,255,255,0.04). Active tab: SVG icon #F2D06B with a 2px #F2D06B top indicator 20px wide, no colored background on active tab. Inactive tab: SVG icon #2E2E3E."
        }
      ]
    },
    {
      "id": "REQ-5",
      "summary": "Redesign Explorer professional cards as full-width vertical list with 80px height, flex layout, 44px avatar circle, flash response time text, and star rating SVG",
      "acceptanceCriteria": [
        "Explorer displays professionals as a full-width list, not a grid",
        "Each card is exactly 80px tall with the specified flex layout",
        "Avatar circle is 44px with photo cover or initials fallback",
        "Flash response time shows as text in #00D97A with no emoji",
        "Star rating uses an SVG icon, not an emoji",
        "Price displays in #F2D06B"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/Explorer.tsx",
          "operation": "modify",
          "description": "Redesign professional cards as a full-width vertical list. Each card: height 80px, background #0D0D13, border 1px solid rgba(255,255,255,0.05), border-radius 14px, padding 0 16px, display flex, align-items center, gap 14px. Left: 44px circle avatar — if photo: img object-fit cover border-radius 50%; if no photo: subtle gradient + Inter 700 16px initials. Center (flex-1): name in Inter 700 16px #F4F4F8; 'Catégorie · Ville' in Inter 400 13px #54546C; if flash active: 'Répond en Xmin' in Inter 500 12px #00D97A (text only, no emoji). Right (text-align right): SVG star 12px + '4.9' in Inter 600 13px; 'dès 35 CHF' in Inter 700 14px #F2D06B."
        }
      ]
    },
    {
      "id": "REQ-6",
      "summary": "Update WalletPro with escrow explanation text, disabled transfer button state 'Virement initié' for 30s, and toast notification with green left border",
      "acceptanceCriteria": [
        "Escrow explanation text 'Libéré dans 48h après prestation' appears below the escrow amount",
        "Transfer button becomes disabled and shows 'Virement initié' immediately after tap",
        "Button re-enables after 30 seconds",
        "Toast notification appears for 5s with the transfer message and #00D97A left border"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/WalletPro.tsx",
          "operation": "modify",
          "description": "Below the '55 CHF séquestre' line, add text 'Libéré dans 48h après prestation' in Inter 400 12px #54546C. After user initiates a transfer, disable the transfer button and set its label to 'Virement initié' for 30 seconds. Show a toast notification for 5s reading 'Virement de 240 CHF vers votre Revolut' with a 3px left border in #00D97A. Re-enable button after 30s."
        }
      ]
    },
    {
      "id": "REQ-7",
      "summary": "Redesign RoleSelection screen with 2 full-width 96px cards, zero emojis, SVG arrow right, and tap-active border/background highlighting",
      "acceptanceCriteria": [
        "Role selection shows exactly 2 full-width cards at 96px height",
        "No emoji or iOS-style icons appear on either card",
        "SVG arrow is visible on the right of each card",
        "Tapping Client card highlights it with blue border and subtle blue tint",
        "Tapping Professional card highlights it with gold border and subtle gold tint"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/RoleSelection.tsx",
          "operation": "modify",
          "description": "Redesign with 2 full-width cards, each 96px tall, zero emojis, zero iOS-style icons. Client card: title 'Client' Inter 700 20px #F4F4F8, subtitle 'Réservez un expert à domicile' Inter 400 14px #54546C, SVG arrow right 16px #2E2E3E absolute right, background #0D0D13, border #1E1E26, border-radius 16px; on tap: border #5B7FFF, background rgba(91,127,255,0.04). Professional card: title 'Professionnel' Inter 700 20px #F4F4F8, subtitle 'Gérez votre activité beauté' Inter 400 14px #54546C, SVG arrow right 16px #2E2E3E, background #0D0D13, border #1E1E26, border-radius 16px; on tap: border #F2D06B, background rgba(242,208,107,0.04)."
        }
      ]
    },
    {
      "id": "REQ-8",
      "summary": "Enforce dark text (#050507) on all gold (#F2D06B) background buttons, ensuring no gold-on-gold contrast issues anywhere in the app",
      "acceptanceCriteria": [
        "Subscription CTA button renders with #F2D06B background and #050507 text",
        "No instance of gold/yellow text on gold/yellow background exists anywhere in the app",
        "Button text is legible with sufficient contrast ratio"
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/ProSubscriptionModal.tsx",
          "operation": "modify",
          "description": "Ensure subscription CTA button 'Commencer l'essai gratuit' always renders with background #F2D06B and text color #050507. Never apply gold/yellow text on gold/yellow background."
        },
        {
          "path": "frontend/src/components/MonBusiness.tsx",
          "operation": "modify",
          "description": "Audit all buttons with #F2D06B background in MonBusiness and enforce dark text #050507. Ensure no gold-on-gold contrast issues."
        },
        {
          "path": "frontend/src/components/SubscriptionScreen.tsx",
          "operation": "modify",
          "description": "Audit subscription screen buttons with #F2D06B background and enforce text color #050507. Ensure legible contrast for all CTAs."
        },
        {
          "path": "frontend/src/components/Subscription.tsx",
          "operation": "modify",
          "description": "Audit subscription buttons with #F2D06B background and enforce text color #050507. Ensure no gold text appears on gold background."
        }
      ]
    }
  ]
}