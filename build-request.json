{
  "kind": "build_request",
  "title": "NEXUS Patch v6.0 — Full UI Corrections (C1–C8)",
  "projectName": "NEXUS",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Replace every emoji in the UI with inline SVG icons (stroke 1.5px, currentColor, 16px default). Pro tab bar: Radar = circle + 2 concentric arcs, Wallet = rectangle with centered $, Dashboard = 3 horizontal lines, Mon Business = simple pencil. Client tab bar: Explorer = thin magnifier, Réservations = simple calendar, Alertes = thin bell, Profil = circle + clean silhouette. Section titles: 'Flash Live' = plain text + 14px lightning SVG before. Radar buttons: 'Accepter' + 14px check SVG, 'Décliner' + 14px × SVG. Subscription modal list: SVG thin dash bullet, no emoji. 'Mon Business' section title = plain text only. 'Me Rendre Visible' button label → 'Activer mon profil'. Confetti particles: color #F2D06B only.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Remplacer chaque emoji par SVG inline stroke 1.5px couleur héritée currentColor"
        ]
      },
      "acceptanceCriteria": [
        "Zero emoji characters appear anywhere in the rendered UI",
        "All SVG icons use stroke 1.5px and inherit currentColor",
        "Both tab bars (pro and client) display SVG-only icons",
        "Radar Accept/Decline buttons show SVG check and × alongside text",
        "Confetti renders only in #F2D06B"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Implement a 2×2 photo upload grid in the MonBusiness gallery section. Each empty slot contains a hidden <input type='file' accept='image/*'>; tapping the slot triggers .click() on the input. onChange uses FileReader.readAsDataURL and stores the dataURL in state per slot index. Filled slots show <img src={dataURL} style='object-fit:cover; width:100%; height:100%'> with an absolute × button (top: 8px, right: 8px) that clears that slot. Display a live counter 'X/4 photos' and a gold progress bar at (count/4)*100% width. When count >= 3, show the text 'Minimum atteint ✓'.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "4 slots 2×2 grid. Chaque slot vide : <input type=\"file\" accept=\"image/*\"> caché"
        ]
      },
      "acceptanceCriteria": [
        "Grid renders as 2×2 layout with 4 slots",
        "Tapping an empty slot opens the native file picker",
        "Selected image displays as full cover within its slot",
        "× button removes the photo and resets that slot",
        "Counter 'X/4 photos' updates in real time",
        "Progress bar width equals (filledCount/4)*100% in gold",
        "Text 'Minimum atteint ✓' appears when 3 or more slots are filled"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Implement the complete subscription activation flow in ProSubscriptionModal. 'Activer mon profil' tap opens a fullscreen modal with: title '7 jours gratuits' (Inter 800 32px white), subtitle 'puis 19.90 CHF/mois' (Inter 400 16px #9898B4), a 6-item advantage list using SVG thin-dash bullets (no emoji), email input (bg #0D0D13, border #1E1E26, focus border #F2D06B), and a 'Commencer l'essai gratuit' button (bg #F2D06B, color #050507, Inter 700 14px, height 56px). On button tap: (1) a gold progress bar at the top of the screen animates from 0→100% over 2s; (2) a fullscreen overlay (#050507) appears showing an 80px circle (#00D97E) with an animated SVG check (stroke-dashoffset 400ms), text 'Profil activé' (Inter 800 28px #F4F4F8), subtext 'Visible par les clients dès maintenant' (Inter 400 15px #9898B4), and 40 gold confetti particles (#F2D06B only); (3) after 2500ms, navigate to Pro Dashboard and set state { proActif: true, essaiJours: 7 }. Pro Dashboard after activation shows a pill badge 'ESSAI GRATUIT · J1/7' (#00D97A at 10% opacity bg + border + text color). Flash toggle defaults to ON when proActif is true. 'Voir mon profil public' button navigates to Explorer with the pro profile visible at position 1.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Tap 'Activer mon profil' → modal fullscreen"
        ]
      },
      "acceptanceCriteria": [
        "Fullscreen modal opens with correct typography and colors on 'Activer mon profil' tap",
        "Email input has correct styling with gold focus border",
        "Button has #F2D06B background and #050507 text — never gold on gold",
        "Top progress bar animates 0→100% over 2s on submit",
        "Success overlay appears with animated green check circle and gold confetti",
        "Navigation to Pro Dashboard occurs after 2500ms",
        "proActif and essaiJours state are set correctly",
        "Pro Dashboard shows 'ESSAI GRATUIT · J1/7' badge in green pill style",
        "Flash toggle is ON by default when proActif is true"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Simplify the color palette across the app. Explorer cards: background #0D0D13 (remove all violet/bordeaux tints), border 1px solid rgba(255,255,255,0.06). Wallet card: background linear-gradient(135deg, #0A0A0A, #0F0E0A), border 1px solid rgba(242,208,107,0.15), remove orange-brown saturated gradient. Balance display: '240 CHF' in Inter 900 48px #F2D06B, 'SOLDE DISPONIBLE' in Inter 600 10px #54546C. Bar chart: inactive bars #1C1C26, today's active bar #F2D06B, remove all gold/brown gradients on bars. Tab bar (both client and pro): background rgba(5,5,7,0.96) backdrop-blur(24px), border-top 1px solid rgba(255,255,255,0.04), active tab icon SVG #F2D06B with a 2px #F2D06B top indicator 20px wide, inactive tab icon SVG #2E2E3E, no colored background on active tab.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Explorer cards 2 colonnes : Fond : #0D0D13 (NEUTRE — supprimer violet/bordeaux)"
        ]
      },
      "acceptanceCriteria": [
        "No violet or bordeaux colors appear on Explorer cards",
        "Wallet card uses the specified neutral dark gradient",
        "Bar chart inactive bars are #1C1C26 and today's bar is #F2D06B with no gradients",
        "Tab bar background is rgba(5,5,7,0.96) with backdrop-blur",
        "Active tab shows a 2px gold top indicator and gold SVG icon, no colored background"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Redesign Explorer professional cards as a full-width vertical list. Each card: height 80px, background #0D0D13, border 1px solid rgba(255,255,255,0.05), border-radius 14px, padding 0 16px, display flex, align-items center, gap 14px. Left: 44px circle — if photo: img object-fit cover border-radius 50%; if no photo: subtle gradient + Inter 700 16px initials. Center (flex-1): name in Inter 700 16px #F4F4F8; 'Catégorie · Ville' in Inter 400 13px #54546C; if flash active: 'Répond en Xmin' in Inter 500 12px #00D97A (text only, no emoji). Right (text-right): SVG star 12px + '4.9' in Inter 600 13px; 'dès 35 CHF' in Inter 700 14px #F2D06B.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Passer en liste plein largeur : height 80px"
        ]
      },
      "acceptanceCriteria": [
        "Explorer displays professionals as a full-width list, not a grid",
        "Each card is exactly 80px tall with the specified flex layout",
        "Avatar circle is 44px with photo cover or initials fallback",
        "Flash response time shows as text in #00D97A with no emoji",
        "Star rating uses an SVG icon, not an emoji",
        "Price displays in #F2D06B"
      ]
    },
    {
      "id": "REQ-6",
      "text": "Update the WalletPro component: below the '55 CHF séquestre' line, add the text 'Libéré dans 48h après prestation' in Inter 400 12px #54546C. After the user initiates a transfer, disable the transfer button and display its label as 'Virement initié' for 30 seconds. Show a toast notification for 5s reading 'Virement de 240 CHF vers votre Revolut' with a 3px left border in #00D97A.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Sous '55 CHF séquestre' ajouter : 'Libéré dans 48h après prestation'"
        ]
      },
      "acceptanceCriteria": [
        "Escrow explanation text 'Libéré dans 48h après prestation' appears below the escrow amount",
        "Transfer button becomes disabled and shows 'Virement initié' immediately after tap",
        "Button re-enables after 30 seconds",
        "Toast notification appears for 5s with the transfer message and #00D97A left border"
      ]
    },
    {
      "id": "REQ-7",
      "text": "Redesign the RoleSelection screen. Replace current cards with 2 full-width cards, each 96px tall, zero emojis, zero iOS-style icons. Client card: title 'Client' Inter 700 20px #F4F4F8, subtitle 'Réservez un expert à domicile' Inter 400 14px #54546C, SVG arrow right 16px #2E2E3E positioned absolute right, background #0D0D13, border #1E1E26, border-radius 16px; on tap: border changes to #5B7FFF, background rgba(91,127,255,0.04). Professional card: title 'Professionnel' Inter 700 20px #F4F4F8, subtitle 'Gérez votre activité beauté' Inter 400 14px #54546C, SVG arrow right 16px #2E2E3E, background #0D0D13, border #1E1E26, border-radius 16px; on tap: border changes to #F2D06B, background rgba(242,208,107,0.04).",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "2 cards full-width height 96px : Zéro emoji. Zéro icône iOS."
        ]
      },
      "acceptanceCriteria": [
        "Role selection shows exactly 2 full-width cards at 96px height",
        "No emoji or iOS-style icons appear on either card",
        "SVG arrow is visible on the right of each card",
        "Tapping Client card highlights it with blue border and subtle blue tint",
        "Tapping Professional card highlights it with gold border and subtle gold tint"
      ]
    },
    {
      "id": "REQ-8",
      "text": "Ensure the subscription CTA button 'Commencer l'essai gratuit' (and any similar primary CTA) always renders with background #F2D06B and text color #050507. Never apply gold/yellow text on a gold/yellow background anywhere in the app. Audit all buttons with #F2D06B background and enforce dark text #050507.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "CRITIQUE : texte doré sur fond doré = illisible. Bouton 'Commencer' → background #F2D06B color #050507"
        ]
      },
      "acceptanceCriteria": [
        "Subscription CTA button renders with #F2D06B background and #050507 text",
        "No instance of gold/yellow text on gold/yellow background exists anywhere in the app",
        "Button text is legible with sufficient contrast ratio"
      ]
    }
  ],
  "constraints": [
    "Do not rebuild from scratch — apply corrections to existing code only",
    "Do not modify files under frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, or frontend/src/components/ui",
    "Backend schema and logic must not change",
    "Confetti must use only #F2D06B — no other colors"
  ],
  "nonGoals": [
    "New backend features or data model changes",
    "New screens or navigation flows beyond those specified in C1–C8",
    "Changes to authentication logic",
    "Adding real payment processing"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}