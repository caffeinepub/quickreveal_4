{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-26T02:39:44.425Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 13,
    "implemented": 8,
    "items": [
      {
        "id": "REQ-1",
        "summary": "Create `frontend/src/lib/payrexx.ts` with the exact implementation provided: `createSubscriptionUrl(proId, email, phone)` and `createBookingUrl(bookingId, montant, serviceName, email)` functions that call the Payrexx API directly from the frontend using `VITE_PAYREXX_INSTANCE` and `VITE_PAYREXX_SECRET` env vars, always passing `psp[0]=twint`, returning the gateway link URL. No Stripe, no Revolut references anywhere.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/lib/payrexx.ts"
        ],
        "matchedFiles": [
          "frontend/src/lib/payrexx.ts"
        ]
      },
      {
        "id": "REQ-10",
        "summary": "Implement `SetupScreen` (first-run configuration screen). Display it before `AdminLoginScreen` if any of `VITE_PAYREXX_INSTANCE`, `VITE_PAYREXX_SECRET`, or `VITE_WORKER_URL` are empty OR if no admin credentials exist in localStorage. The screen must have: title 'NEXUS Initial Configuration' (Inter 800 28px), Payrexx section (Instance input placeholder 'nexus', Secret API input type=password), Twilio section (Worker URL input placeholder 'https://...'), Admin section (email, password, confirm password). 'Initialize NEXUS' CTA button with gold background and `#050507` text saves all values to localStorage and to the canister admin config via `lib/api.ts`.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/screens/SetupScreen.tsx"
        ],
        "matchedFiles": [
          "frontend/src/screens/SetupScreen.tsx"
        ]
      },
      {
        "id": "REQ-11",
        "summary": "Create `backend/main.mo` (full Motoko actor) and `backend/Types.mo` implementing: user auth (Internet Identity principal), pro profiles (status, location, category, services, gallery, avis), explorer query (active pros + flash pros), 5-step booking lifecycle (pending → confirmed → in_progress → completed → cancelled), wallet (CHF balance, transfer with 30s cooldown), notifications, admin functions (validate pro, list all bookings, revenue stats), 48h escrow heartbeat, and admin config storage (SetupScreen values). Include the commented-out `PAYREXX_INTEGRATION` stub as specified.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-12",
        "summary": "Create `.env.production` file at the project root with the template: `VITE_PAYREXX_INSTANCE=nexus`, `VITE_PAYREXX_SECRET=your_secret`, `VITE_WORKER_URL=https://nexus-sms.workers.dev`, `VITE_ICP_CANISTER_ID=your_canister_id`, `VITE_ICP_HOST=https://ic0.app`. Placeholder values must be clearly marked as requiring replacement.",
        "status": "missing",
        "plannedFiles": [
          ".env.production"
        ],
        "matchedFiles": []
      },
      {
        "id": "REQ-13",
        "summary": "Enforce absolute layout rules across ALL screens: `flex flex-col fixed inset-0` on root container, scrollable content zone uses `flex-1 overflow-y-auto`, CTA buttons use `flex-shrink-0` anchored at bottom, tab bars use `flex-shrink-0` (never `position: fixed`). Remove all `100vh` CSS. Font is Inter exclusively. Palette CSS variables defined in `globals.css`. Gold background always pairs with `color: #050507`. Zero emojis anywhere in source code.",
        "status": "missing",
        "plannedFiles": [
          "frontend/src/index.css",
          "frontend/src/components/Explorer.tsx",
          "frontend/src/components/ProLayout.tsx",
          "frontend/src/components/BookingFlow.tsx",
          "frontend/src/components/AdminPanel.tsx",
          "frontend/src/components/icons/Icons.tsx",
          "frontend/src/components/ui/TabBarClient.tsx",
          "frontend/src/components/ui/TabBarPro.tsx",
          "frontend/src/components/ui/TabBarAdmin.tsx"
        ],
        "matchedFiles": []
      },
      {
        "id": "REQ-2",
        "summary": "Create `frontend/src/lib/twilio.ts` with `sendOTP(phone)` and `verifyOTP(phone, code)` functions that proxy through `VITE_WORKER_URL` (`/send-otp` and `/verify-otp` endpoints). Credentials are never exposed on the frontend. `verifyOTP` returns `data.valid === true`.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/lib/twilio.ts"
        ],
        "matchedFiles": [
          "frontend/src/lib/twilio.ts"
        ]
      },
      {
        "id": "REQ-3",
        "summary": "Add documented Payrexx HTTP outcall stub in `backend/main.mo` as a block comment titled `PAYREXX_INTEGRATION`, showing the full commented-out `callPayrexx` function using `IC.http_request` for future ICP mainnet HTTP outcalls activation. The stub must be preserved verbatim and never deleted.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-4",
        "summary": "Refactor the entire frontend into the exact multi-file architecture specified. Deliver every file listed: `src/App.tsx` (useState routing, ToastContainer, NotifsPanel), `src/state/useAppState.ts` (global state, `go()`, `showToast()`, `update()`), `src/lib/actor.ts` (ICP Internet Identity, createActor, login, logout), `src/lib/api.ts` (all canister functions), `src/lib/notifications.ts` (getNotifications, markRead), `src/styles/globals.css` (CSS vars palette, keyframe animations, mobile reset, scrollbar hidden), and `src/components/icons/index.tsx` (30+ SVG icon components, zero emojis).",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/state/useAppState.ts",
          "frontend/src/lib/actor.ts",
          "frontend/src/lib/api.ts",
          "frontend/src/lib/notifications.ts",
          "frontend/src/styles/globals.css",
          "frontend/src/components/icons/index.tsx",
          "frontend/src/App.tsx"
        ],
        "matchedFiles": [
          "frontend/src/state/useAppState.ts",
          "frontend/src/lib/notifications.ts",
          "frontend/src/components/icons/index.tsx"
        ]
      },
      {
        "id": "REQ-5",
        "summary": "Deliver all UI component files under `src/components/ui/`: `BtnPrimary.tsx`, `BtnSecondary.tsx`, `Input.tsx`, `Label.tsx`, `Card.tsx`, `Toast.tsx`, `Header.tsx`, `TabBarClient.tsx`, `TabBarPro.tsx`, `TabBarAdmin.tsx`, `BottomSheet.tsx`, `ProgressCircle.tsx`, `Shimmer.tsx`. Each component must be fully functional with proper TypeScript props, onClick/onChange handlers, and no emojis.",
        "status": "missing",
        "plannedFiles": [
          "frontend/src/components/ui/BtnPrimary.tsx",
          "frontend/src/components/ui/BtnSecondary.tsx",
          "frontend/src/components/ui/Input.tsx",
          "frontend/src/components/ui/Label.tsx",
          "frontend/src/components/ui/Card.tsx",
          "frontend/src/components/ui/Toast.tsx",
          "frontend/src/components/ui/Header.tsx",
          "frontend/src/components/ui/TabBarClient.tsx",
          "frontend/src/components/ui/TabBarPro.tsx",
          "frontend/src/components/ui/TabBarAdmin.tsx",
          "frontend/src/components/ui/BottomSheet.tsx",
          "frontend/src/components/ui/ProgressCircle.tsx",
          "frontend/src/components/ui/Shimmer.tsx"
        ],
        "matchedFiles": []
      },
      {
        "id": "REQ-6",
        "summary": "Deliver all auth screens: `src/screens/auth/LoginScreen.tsx` (Internet Identity login, real ICP mainnet), `src/screens/auth/RoleScreen.tsx` (client / professional / admin role selection), `src/screens/auth/OTPScreen.tsx` (6-digit SMS OTP input verified via `lib/twilio.ts` Cloudflare Worker). All screens must have back navigation and no emoji.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/screens/auth/LoginScreen.tsx",
          "frontend/src/screens/auth/RoleScreen.tsx",
          "frontend/src/screens/auth/OTPScreen.tsx"
        ],
        "matchedFiles": [
          "frontend/src/screens/auth/LoginScreen.tsx",
          "frontend/src/screens/auth/RoleScreen.tsx",
          "frontend/src/screens/auth/OTPScreen.tsx"
        ]
      },
      {
        "id": "REQ-7",
        "summary": "Deliver all client screens: `ExplorerScreen.tsx`, `FicheProScreen.tsx`, `Booking1Screen.tsx` through `Booking5Screen.tsx` (5-step booking flow), `LiveStatusScreen.tsx`, `ReservationsScreen.tsx`, `AlertesScreen.tsx`, `ClientProfilScreen.tsx`. All screens use `go()` from `useAppState` for navigation. Booking confirmation must call `createBookingUrl` from `lib/payrexx.ts` and redirect via `window.location.href` to the Payrexx TWINT gateway. No setTimeout fake payment flows.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/screens/client/ExplorerScreen.tsx",
          "frontend/src/screens/client/FicheProScreen.tsx",
          "frontend/src/screens/client/Booking1Screen.tsx",
          "frontend/src/screens/client/Booking2Screen.tsx",
          "frontend/src/screens/client/Booking3Screen.tsx",
          "frontend/src/screens/client/Booking4Screen.tsx",
          "frontend/src/screens/client/Booking5Screen.tsx",
          "frontend/src/screens/client/LiveStatusScreen.tsx",
          "frontend/src/screens/client/ReservationsScreen.tsx",
          "frontend/src/screens/client/AlertesScreen.tsx",
          "frontend/src/screens/client/ClientProfilScreen.tsx"
        ],
        "matchedFiles": [
          "frontend/src/screens/client/ExplorerScreen.tsx",
          "frontend/src/screens/client/ReservationsScreen.tsx",
          "frontend/src/screens/client/AlertesScreen.tsx",
          "frontend/src/screens/client/ClientProfilScreen.tsx"
        ]
      },
      {
        "id": "REQ-8",
        "summary": "Deliver all pro screens: `ProDashboardScreen.tsx`, `ProRadarScreen.tsx`, `ProWalletScreen.tsx`, `ProBusinessScreen.tsx` (5 tabs: profile, services, tarifs, payment, gallery), `SubscriptionModal.tsx` (calls `createSubscriptionUrl` from `lib/payrexx.ts`, redirects to Payrexx TWINT), `SuccessScreen.tsx`. No Stripe, no emoji.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/screens/pro/ProDashboardScreen.tsx",
          "frontend/src/screens/pro/ProRadarScreen.tsx",
          "frontend/src/screens/pro/ProWalletScreen.tsx",
          "frontend/src/screens/pro/ProBusinessScreen.tsx",
          "frontend/src/screens/pro/SubscriptionModal.tsx",
          "frontend/src/screens/pro/SuccessScreen.tsx"
        ],
        "matchedFiles": [
          "frontend/src/screens/pro/ProDashboardScreen.tsx",
          "frontend/src/screens/pro/ProRadarScreen.tsx",
          "frontend/src/screens/pro/SubscriptionModal.tsx",
          "frontend/src/screens/pro/SuccessScreen.tsx"
        ]
      },
      {
        "id": "REQ-9",
        "summary": "Deliver all admin screens: `AdminLoginScreen.tsx`, `AdminDashboardScreen.tsx`, `AdminProsScreen.tsx`, `AdminBookingsScreen.tsx`, `AdminRevenusScreen.tsx`. Admin login must use credentials stored in localStorage (set during first-run SetupScreen). No emoji.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/screens/admin/AdminLoginScreen.tsx",
          "frontend/src/screens/admin/AdminDashboardScreen.tsx",
          "frontend/src/screens/admin/AdminProsScreen.tsx",
          "frontend/src/screens/admin/AdminBookingsScreen.tsx",
          "frontend/src/screens/admin/AdminRevenusScreen.tsx"
        ],
        "matchedFiles": [
          "frontend/src/screens/admin/AdminLoginScreen.tsx",
          "frontend/src/screens/admin/AdminDashboardScreen.tsx"
        ]
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/components/icons/index.tsx",
    "frontend/src/context/AppContext.tsx",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/lib/notifications.ts",
    "frontend/src/lib/payrexx.ts",
    "frontend/src/lib/twilio.ts",
    "frontend/src/screens/SetupScreen.tsx",
    "frontend/src/screens/admin/AdminDashboardScreen.tsx",
    "frontend/src/screens/admin/AdminLoginScreen.tsx",
    "frontend/src/screens/auth/LoginScreen.tsx",
    "frontend/src/screens/auth/OTPScreen.tsx",
    "frontend/src/screens/auth/RoleScreen.tsx",
    "frontend/src/screens/client/AlertesScreen.tsx",
    "frontend/src/screens/client/ClientProfilScreen.tsx",
    "frontend/src/screens/client/ExplorerScreen.tsx",
    "frontend/src/screens/client/ReservationsScreen.tsx",
    "frontend/src/screens/pro/ProDashboardScreen.tsx",
    "frontend/src/screens/pro/ProRadarScreen.tsx",
    "frontend/src/screens/pro/SubscriptionModal.tsx",
    "frontend/src/screens/pro/SuccessScreen.tsx",
    "frontend/src/state/useAppState.ts",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}